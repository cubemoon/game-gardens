<!-- project build configuration -->
<project name="Game Gardens Client" default="all" basedir=".">

  <!-- load up our configuration information -->
  <property name="base.dir" value="../.."/>
  <property file="${base.dir}/toybox.properties"/>

  <!-- define the places where we get and put things -->
  <property name="java.libs"  value="${base.dir}/lib"/>
  <property name="web.home"   value="${base.dir}/pages"/>
  <property name="deploy.dir" value="${web.home}/client"/>

  <!-- removes unneeded code and generates one big jar file -->
  <target name="proguard">
    <taskdef resource="proguard/ant/task.properties"
             classpath="lib/proguard.jar"/>
    <proguard configuration="lib/gg-client.pro"/>
    <mkdir dir="${deploy.dir}"/>
    <copy todir="${deploy.dir}" file="gg-client.jar"/>
    <!-- also copy the client jar into the game development directory -->
    <copy todir="../games/client" file="gg-client.jar"/>
  </target>

  <!-- signs the client jar files -->
  <target name="sign">
    <signjar lazy="true" alias="${sign.alias}" keystore="${sign.keystore}"
      storepass="${sign.storepass}">
      <fileset dir="${deploy.dir}" includes="*.jar"/>
    </signjar>
  </target>

  <!-- the default target is to build, install and sign the client -->
  <target name="all" depends="proguard,sign"/>

  <!-- cleans out the installed application -->
  <target name="clean">
    <delete dir="${deploy.dir}" includes="*.jar"/>
  </target>
</project>
